<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Valentine?</title>

<style>
:root { --bg1:#ffdde1; --bg2:#ee9ca7; }
* { box-sizing: border-box; }

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  overflow:hidden;
}

/* background floating hearts */
.bg-hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:.45;
  z-index:0;
}
.bg-heart{
  position:absolute;
  font-size:28px;
  animation: bgFloat linear forwards;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.08));
}
@keyframes bgFloat{
  from{ transform: translateY(12vh) scale(.9); opacity:0; }
  12%{ opacity:1; }
  to{ transform: translateY(-135vh) scale(1.3); opacity:0; }
}

/* White card */
.card{
  width:min(760px,92vw);
  min-height:460px;
  background:rgba(255,255,255,.86);
  border-radius:24px;
  padding:28px;
  box-shadow:0 20px 60px rgba(0,0,0,.18);
  position:relative;
  z-index:2;
}

h1{ margin:0 0 10px; font-size:clamp(26px,3vw,40px); text-align:center; }
p{ margin:0 0 10px; text-align:center; opacity:.82; }

.hint{
  text-align:center;
  font-size:12px;
  opacity:.7;
  margin-bottom:18px;
  transition: opacity .6s ease, transform .6s ease;
}
.hint.hide{
  opacity:0;
  transform: translateY(-6px);
  pointer-events:none;
}

/* Arena with your photo background */
.arena{
  position:relative;
  height:280px;
  border-radius:18px;
  background-image:url("4D4548FA-A982-475D-81D8-B881CF0DA107_1_201_a.jpeg");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  background-color:rgba(0,0,0,0.25);
  background-blend-mode:overlay;
  overflow:hidden;
}

/* Fireworks canvas */
#fx{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  display:none;
  pointer-events:none;
}

/* Base button styling */
.btn{
  border:0;
  font-weight:800;
  cursor:pointer;
  user-select:none;
  position:absolute;
  box-shadow:0 10px 25px rgba(0,0,0,.16);
}

/* ‚úÖ SIMPLE UNICOLOR HEART YES button */
#yesBtn{
  left:50%;
  top:58%;
  width:108px;
  height:108px;
  transform: translate(-50%, -50%) rotate(-45deg);
  background:#ff3b6a;
  color:#fff;
  font-size:18px;
  letter-spacing:.4px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:16px;
  animation: pulse 1.2s infinite;

  /* prevents weird seam clipping on some browsers */
  isolation: isolate;
}

#yesBtn span{
  transform: rotate(45deg);
  position: relative;
  z-index: 5; /* keep text above shapes */
  text-shadow: 0 2px 10px rgba(0,0,0,.28);
  -webkit-font-smoothing: antialiased;
}

/* heart lobes (same flat color) */
#yesBtn::before,
#yesBtn::after{
  content:"";
  position:absolute;
  width:108px;
  height:108px;
  background:#ff3b6a;
  border-radius:50%;
  z-index: 1;
}
#yesBtn::before{ top:-54px; left:0; }
#yesBtn::after{ left:54px; top:0; }

@keyframes pulse{
  0%   { transform: translate(-50%,-50%) rotate(-45deg) scale(1); }
  50%  { transform: translate(-50%,-50%) rotate(-45deg) scale(1.08); }
  100% { transform: translate(-50%,-50%) rotate(-45deg) scale(1); }
}

/* click pop */
#yesBtn.clicked{
  animation: pop .55s ease-out 1;
}
@keyframes pop{
  0%   { transform: translate(-50%,-50%) rotate(-45deg) scale(1); }
  35%  { transform: translate(-50%,-50%) rotate(-45deg) scale(1.22); }
  70%  { transform: translate(-50%,-50%) rotate(-45deg) scale(.98); }
  100% { transform: translate(-50%,-50%) rotate(-45deg) scale(1.08); }
}

/* NO button */
#noBtn{
  background: rgba(0,0,0,.78);
  color: #fff;
  font-size: 14px;
  padding: 10px 14px;
  border-radius: 14px;
  border: 2px solid rgba(255,255,255,.85);
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}

/* Result */
.result{
  display:none;
  text-align:center;
  padding-top:10px;
  opacity:0;
  transform: translateY(10px);
  transition: opacity .55s ease, transform .55s ease;
}
.result.show{ opacity:1; transform: translateY(0); }
.result img{
  width:min(420px,80vw);
  border-radius:16px;
  box-shadow:0 14px 35px rgba(0,0,0,.18);
  opacity:0;
  transform: translateY(8px);
  transition: opacity .8s ease, transform .8s ease;
}
.result.show img{ opacity:1; transform: translateY(0); }

.footer{ margin-top:14px; text-align:center; font-size:12px; opacity:.65; }

/* Replay button */
#replayBtn{
  margin-top:14px;
  border:0;
  padding:10px 14px;
  border-radius:12px;
  font-weight:800;
  cursor:pointer;
  background: rgba(0,0,0,.85);
  color: white;
  box-shadow: 0 12px 25px rgba(0,0,0,.18);
}
#replayBtn:hover{ filter: brightness(1.06); }

/* Hearts confetti */
.hearts{ position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:3; }
.heart{ position:absolute; font-size:18px; opacity:.9; animation: floatUp linear forwards; }
@keyframes floatUp{
  from{ transform: translateY(0) scale(1); opacity:.9; }
  to  { transform: translateY(-120vh) scale(1.25); opacity:0; }
}

/* üéµ Play Music Button */
#playMusicBtn{
  position:fixed;
  top:18px;
  right:18px;
  width:132px;
  height:132px;
  border-radius:50%;
  background-image:url("song image.jpg");
  background-size:cover;
  background-position:center;
  border:5px solid rgba(255,255,255,.9);
  cursor:pointer;
  box-shadow:0 16px 42px rgba(0,0,0,.30);
  transition: transform .15s ease, filter .15s ease;
  z-index: 50;
  overflow:hidden;
}
#playMusicBtn::before{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle at center, rgba(0,0,0,.25), rgba(0,0,0,.05));
}
#playMusicBtn::after{
  content:"‚ñ∂";
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%);
  width:52px;
  height:52px;
  border-radius:50%;
  display:grid;
  place-items:center;
  background: rgba(0,0,0,.55);
  color: white;
  font-size: 20px;
  backdrop-filter: blur(2px);
}
#playMusicBtn.playing::after{ content:"‚ùö‚ùö"; }
#playMusicBtn:hover{
  transform: scale(1.05);
  filter: brightness(1.05);
}

/* pulse while playing */
#playMusicBtn.playing{ animation: beat 0.62s infinite; }
@keyframes beat{
  0%{
    box-shadow:
      0 16px 42px rgba(0,0,0,.30),
      0 0 0 0 rgba(255,255,255,.28),
      0 0 0 0 rgba(255,59,106,.40);
  }
  55%{
    box-shadow:
      0 16px 42px rgba(0,0,0,.30),
      0 0 0 16px rgba(255,255,255,.18),
      0 0 34px rgba(255,59,106,.62);
  }
  100%{
    box-shadow:
      0 16px 42px rgba(0,0,0,.30),
      0 0 0 0 rgba(255,255,255,0),
      0 0 0 rgba(255,59,106,0);
  }
}
</style>
</head>

<body>
  <div class="bg-hearts" id="bgHearts"></div>
  <button id="playMusicBtn" title="Play / Pause song"></button>

  <div class="card">
    <div id="question">
      <h1>Tonka, will you be my Valentine? üíò</h1>
      <p>You can say ‚ÄúNo‚Äù‚Ä¶ if you can catch it.</p>
      <div id="musicHint" class="hint">Tip: tap the music button for the full vibe üé∂</div>

      <div id="arena" class="arena">
        <canvas id="fx"></canvas>
        <button id="yesBtn" class="btn"><span>YES</span></button>
        <button id="noBtn" class="btn" aria-label="No">no</button>
      </div>

      <div class="footer">(Tip: try really hard to click ‚Äúno‚Äù üòÖ)</div>
    </div>

    <div id="result" class="result">
      <h2>CONGRATULATIONS üéâüíò</h2>
      <p>You are officially my Valentine üòé</p>
      <img id="meme" alt="funny meme" src="giphy.gif">
      <div><button id="replayBtn">Replay üîÅ</button></div>
    </div>

    <div class="hearts" id="hearts"></div>
    <audio id="music" src="song.mp3" preload="auto" loop></audio>
  </div>

<script>
const arena = document.getElementById("arena");
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const question = document.getElementById("question");
const result = document.getElementById("result");
const hearts = document.getElementById("hearts");
const music = document.getElementById("music");
const playMusicBtn = document.getElementById("playMusicBtn");
const replayBtn = document.getElementById("replayBtn");
const musicHint = document.getElementById("musicHint");

setTimeout(() => musicHint.classList.add("hide"), 3500);

/* Music behavior */
music.volume = 0.10;

function setPlayingUI(isPlaying){
  if(isPlaying) playMusicBtn.classList.add("playing");
  else playMusicBtn.classList.remove("playing");
}

async function ensureMusicPlaying(){
  if(!music.paused){
    setPlayingUI(true);
    return;
  }
  try{ await music.play(); setPlayingUI(true); } catch(e){}
}

function toggleMusic(){
  if(music.paused) ensureMusicPlaying();
  else { music.pause(); setPlayingUI(false); }
}
music.addEventListener("play", () => setPlayingUI(true));
music.addEventListener("pause", () => setPlayingUI(false));
playMusicBtn.addEventListener("click", toggleMusic);

/* Background hearts */
const bgHearts = document.getElementById("bgHearts");
function spawnBgHeart(){
  const h = document.createElement("div");
  h.className = "bg-heart";
  h.textContent = Math.random() < 0.5 ? "üíó" : "üíñ";
  h.style.left = (Math.random()*100) + "%";
  h.style.bottom = "-30px";
  const dur = 9 + Math.random()*10;
  h.style.animationDuration = dur + "s";
  h.style.fontSize = (22 + Math.random()*20) + "px";
  bgHearts.appendChild(h);
  setTimeout(()=>h.remove(), dur*1000);
}
setInterval(spawnBgHeart, 650);
for(let i=0;i<10;i++) setTimeout(spawnBgHeart, i*170);

/* NO button */
const SAFE_DISTANCE = 125;
const PADDING = 12;

function placeNoRandom() {
  const a = arena.getBoundingClientRect();
  const bw = noBtn.offsetWidth;
  const bh = noBtn.offsetHeight;

  const x = Math.random() * (a.width - bw - PADDING*2) + PADDING;
  const y = Math.random() * (a.height - bh - PADDING*2) + PADDING;

  noBtn.style.left = x + "px";
  noBtn.style.top  = y + "px";
}

function evade(mx, my) {
  const a = arena.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();

  const bx = (b.left - a.left) + b.width/2;
  const by = (b.top  - a.top ) + b.height/2;

  const dx = bx - mx, dy = by - my;
  const dist = Math.hypot(dx,dy);
  if(dist >= SAFE_DISTANCE) return;

  const ux = (dx/(dist||1)) + (Math.random()-0.5)*0.25;
  const uy = (dy/(dist||1)) + (Math.random()-0.5)*0.25;
  const step = (SAFE_DISTANCE - dist) + 80;

  let nl = (b.left - a.left) + ux*step;
  let nt = (b.top  - a.top ) + uy*step;

  nl = Math.max(PADDING, Math.min(a.width  - b.width  - PADDING, nl));
  nt = Math.max(PADDING, Math.min(a.height - b.height - PADDING, nt));

  noBtn.style.left = nl + "px";
  noBtn.style.top  = nt + "px";
}

window.addEventListener("load", placeNoRandom);
window.addEventListener("resize", placeNoRandom);

arena.addEventListener("mousemove", e=>{
  const r = arena.getBoundingClientRect();
  evade(e.clientX - r.left, e.clientY - r.top);
});
arena.addEventListener("touchstart", e=>{
  const t = e.touches[0];
  const r = arena.getBoundingClientRect();
  evade(t.clientX - r.left, t.clientY - r.top);
},{passive:true});

/* Confetti hearts */
function spawnHearts(count=28){
  for(let i=0;i<count;i++){
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = Math.random()<.5 ? "üíñ" : "üíò";
    h.style.left = (Math.random()*100) + "%";
    h.style.bottom = "-20px";
    const dur = 3 + Math.random()*2.2;
    h.style.animationDuration = dur + "s";
    h.style.fontSize = (14 + Math.random()*22) + "px";
    hearts.appendChild(h);
    setTimeout(()=>h.remove(), dur*1000);
  }
}

/* Fireworks */
const fx = document.getElementById("fx");
const ctx = fx.getContext("2d");
let particles = [];
let fireworksRunning = false;
let stopAt = 0;

function resizeCanvas(){
  const r = arena.getBoundingClientRect();
  fx.width = Math.floor(r.width * devicePixelRatio);
  fx.height = Math.floor(r.height * devicePixelRatio);
  fx.style.width = r.width + "px";
  fx.style.height = r.height + "px";
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
window.addEventListener("resize", resizeCanvas);

function boom(x,y){
  const n = 70 + Math.floor(Math.random()*40);
  for(let i=0;i<n;i++){
    const a = Math.random()*Math.PI*2;
    const sp = 2 + Math.random()*4.8;
    particles.push({
      x,y,
      vx: Math.cos(a)*sp,
      vy: Math.sin(a)*sp,
      life: 60 + Math.floor(Math.random()*35),
      age: 0,
      c: `hsl(${Math.floor(Math.random()*360)}, 90%, 60%)`
    });
  }
}

function tick(){
  if(!fireworksRunning) return;

  const w = arena.getBoundingClientRect().width;
  const h = arena.getBoundingClientRect().height;
  ctx.clearRect(0,0,w,h);

  if(Date.now() < stopAt && Math.random() < 0.10){
    boom(40 + Math.random()*(w-80), 40 + Math.random()*(h-120));
  }

  particles = particles.filter(p => p.age < p.life);

  for(const p of particles){
    p.age++;
    p.vy += 0.05;
    p.x += p.vx;
    p.y += p.vy;

    const alpha = 1 - (p.age / p.life);
    ctx.globalAlpha = alpha;
    ctx.fillStyle = p.c;
    ctx.beginPath();
    ctx.arc(p.x, p.y, 2.3, 0, Math.PI*2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;

  if(Date.now() >= stopAt && particles.length === 0){
    fireworksRunning = false;
    fx.style.display = "none";
    return;
  }
  requestAnimationFrame(tick);
}

function startFireworks(durationMs=3600){
  resizeCanvas();
  fx.style.display = "block";
  fireworksRunning = true;
  stopAt = Date.now() + durationMs;

  const w = arena.getBoundingClientRect().width;
  const h = arena.getBoundingClientRect().height;

  boom(w*0.25, h*0.45);
  boom(w*0.55, h*0.35);
  boom(w*0.75, h*0.50);

  requestAnimationFrame(tick);
}

/* YES click */
yesBtn.addEventListener("click", ()=>{
  ensureMusicPlaying();

  yesBtn.classList.add("clicked");
  setTimeout(() => { yesBtn.style.animation = "none"; }, 560);

  spawnHearts(36);
  startFireworks(3600);

  question.style.display = "none";
  result.style.display = "block";
  requestAnimationFrame(() => result.classList.add("show"));
});

/* Replay */
replayBtn.addEventListener("click", ()=>{
  result.classList.remove("show");
  setTimeout(() => {
    result.style.display = "none";
    question.style.display = "block";

    yesBtn.classList.remove("clicked");
    yesBtn.style.animation = "";
    yesBtn.style.animation = "pulse 1.2s infinite";

    placeNoRandom();
  }, 250);
});
</script>
</body>
</html>
